<!DOCTYPE html>
<html>
	<head>
		<title>Graffiti Map</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<meta charset="utf-8">

		<link href="/maps/documentation/javascript/examples/default.css" rel="stylesheet">
		<link rel="stylesheet" href="./css/styles.css">
		<style>
			html, body, #map_canvas {
				margin: 0;
				padding: 0;
				height: 100%;
			}
		</style>
		<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=visualization"></script>
		<script>
			function initialize() {
				var latitude = parseFloat(getUrlVars()["latitude"]);
	 			var longitude = parseFloat(getUrlVars()["longitude"]);
	 			var userid = parseFloat(getUrlVars()["userid"]);
	 			if(!latitude){
					latitude = 0;
				}
				if(!longitude){
					longitude = 0;
				}
				if(!userid){
					userid = 0;
				}
				var myLatlng = new google.maps.LatLng(latitude,longitude);
				var mapOptions = {
					zoom: 14,
					center: myLatlng,
					mapTypeId: google.maps.MapTypeId.ROADMAP
				};

				var map = new google.maps.Map(document.getElementById('map_canvas'),
						mapOptions);

				var marker = new google.maps.Marker({
						position: myLatlng,
						map: map,
						title: 'You are here!'
				});

			}

			function getUrlVars() {
				var vars = {};
				var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
				 if(vars[key]){
					 if(vars[key] instanceof Array){
						 vars[key].push(value);
					 }else{
				vars[key] = [vars[key], value];
					 }
				 }else{
					 vars[key] = value;
				 }
				});
				return vars;
			}

			google.maps.event.addDomListener(window, 'load', initialize);
		</script>
	</head>
	<body>
		<div id="infobox" class="infobox"></div>
		<div id="map_canvas"></div>
		<script src="/socket.io/socket.io.js"></script>
		<script src="./js/graffitiapp.js"></script>
	</body>

</html>